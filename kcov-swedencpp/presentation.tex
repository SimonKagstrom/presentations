\documentclass{beamer}

\usepackage[utf8]{inputenc}
\usepackage{pgfpages}
\usepackage{listings}
\setbeameroption{show notes on second screen}

\usetheme{Madrid}
\graphicspath{ {./images/}{../images/} }

\title[Kcov - a single-step code coverage tool] %optional
{Kcov - a single-step code coverage tool}

%\subtitle{A short story}

\author{Simon Kågström}

\institute
{
  Net Insight\\
}

%\logo{\includegraphics[height=1.5cm]{lion-logo.png}}

\begin{document}

\frame{\titlepage}

\begin{frame}
  \frametitle{Motivation}
  \includegraphics<1>[height=8cm]{goto_fail_no_coverage}
  \includegraphics<2>[height=8cm]{goto_fail}
\end{frame}


\begin{frame}
  \frametitle{Outline}
  \tableofcontents
  \note{Unix environment}
\end{frame}

\begin{frame}
  \frametitle{Outline}
  \tableofcontents
\end{frame}

\begin{frame}[fragile]
  \frametitle{Problems with traditional tools}
  \begin{itemize}
  \item gcov + lcov is a multi-step process
  \item gcov leaves droppings after compilation/running
  \item A program which crashes will not generate coverage data
  \end{itemize}
  \begin{Example}
    \begin{semiverbatim}
     \scriptsize
\$ gcc -g -Wall --coverage goto-fail.c
\$ ./a.out
\$ ls
  a.out  goto-fail.c  goto-fail.gcda  goto-fail.gcno
\$ lcov --capture --directory project-dir --output-file coverage.info
\$ genhtml coverage.info --output-directory out
    \end{semiverbatim}
  \end{Example}
\end{frame}

\begin{frame}
  \frametitle{Kcov overview}
  \begin{itemize}
    \item kcov
    \item Interactive Demo!
  \end{itemize}

  \note{
    \begin{itemize}
      \item Make sure /tmp/kcov is empty

      \item kcov /tmp/kcov projects/build/kcov/target/src/kcov

      \item Show result in browser

      \item Show how a single file looks, describe 1/3 etc

      \item Show file list again, note /usr/include etc

      \item Remove /tmp/kcov
  \end{itemize}
  }
\end{frame}

\begin{frame}
  \frametitle{features}

  \begin{itemize}
    \item kalle
  \end{itemize}

  \note{
    \begin{itemize}
      \item Run kcov with --include-pattern, note that --exclude-pattern and paths also exist

      \item Run kcov on another program (calc?), show that output is merged
    \end{itemize}
  }
\end{frame}

\end{document}

%Kcov - a single-step code coverage tool

%- Motivation

%  - What is code coverage?

%  - goto fail

% - Outline of the presentation


% - Setting: UNIX


% - Problems with gcov + lcov etc

%  - Multiple steps

%  - Loses data on program crash


%- Basic demo of kcov

%  - Explain how the output looks, 1/2 etc

%- History

%  - Bcov by Thomas Neumann

%  - Kernel kcov - not related

%- Some features

%  - What I use if for

%  - Demo with filtering, merging etc


%- How kcov works

%  - A bit about how gcov works

%  - Breakpoints

%  - Differences between OSX and Linux/FreeBSD

 % - Complain a bit about elf_version/libdwarf etc.


% - What about speed?
